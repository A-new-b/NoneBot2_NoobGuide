# 第二章：基础插件编写指南第一节———创建第一个插件
在上一章节，我们以及成功创建了一个最小的nonebot2实例，并与go-cqhttp建立了websocket连接。
在这一章节，我们将了解并编写插件，并进行测试。
## 初识插件
在nonebot2中，对于事件的处理是通过插件的形式完成的，也就是说插件才是实现机器人具体功能的最基本的单位。
#### 内置插件
由nonebot2开发团队维护的，并内置于nonebot2中的插件。例如“echo”这个插件，我们已经在上一章的结尾使用了这个插件来对机器人进行测试。使用方法如下：
```
/echo xxx
```
然后，机器人会回复：
```
xxx
```
#### nb插件商店
由nonebot2官方搭建的插件平台，其中囊括了官方提供的其他插件和其他开发者提供的插件。个人认为，插件商店很像steam的创意工坊。虽然叫商店，但里面的插件是免费且开源的。
点击[这里](https://v2.nonebot.dev/store.html)即可跳转至插件商店。
如果你是使用的官方的nb-cli构建的机器人，使用方法也很简单：
1. 在插件页面浏览插件，并挑选你想要安装的插件。
2. 点击`copy nb install command`，安装指令将会复制到你的剪切板。
命令的结构是`nb plugin install xxx`
3. 开启一个Power Shell或CMD，将命令粘贴进去并回车。

如果你使用的是手动搭建，使用方法将会稍微复杂一些：
1. 在插件页面浏览插件，并挑选你想要安装的插件。
2. 点击插件左上角的GitHub图标，进入其GitHub页面。
3. 将项目clone下来或直接下载zip（如果不会下载请自行百度）。
4. 将项目中的插件部分手动安装至你的`src/plugins`目录下。

## 创建一个插件
在上一章，我们已经创建如下文件及文件夹：
```
\---Bot404
    |   .env
    |   bot.py
    |
    \---src
        \---plugins
```
按照惯例，插件是放在`src/plugins`目录下。
插件可以以单文件的形式以及包形式被创建，我们将依次介绍这两种方式。
#### 单文件形式（不推荐）
直接在`src/plugins`目录下创建一个python源文件，例如`foo1.py`。此时文件结构如下：
```
\---Bot404
    |   .env
    |   bot.py
    |
    \---src
        \---plugins
                foo1.py
```
尽管foo1.py中没有任何代码，它也可被称为一个插件了。
但是，相对于包形式的插件，这种插件由于结构过于简单导致拓展性较差。并且由于事件处理和事件响应的代码挤在了一起，导致在nonebot1与2之间迁移的时候会耗费更多的精力。因此，我更推荐使用包形式。
#### 包形式（推荐）
在`src/plugins`目录下创建一个文件夹，例如`foo2.py`。并在其中创建一个名为`__init__.py`的python源文件。此时文件结构如下：
```
\---Bot404
    |   .env
    |   bot.py
    |
    \---src
        \---plugins
            \---foo2
                    __init__.py
```
对python较为熟悉的小伙伴可能以及看出来了，一个包含`__init__.py`的文件夹可被称为“包”，也就是可以被import的对象，与单文件形式的作用相同。
其中`__init__.py`中包含这个包的初始化代码，也可以为空。

个人推荐在`__init__.py`中写入事件响应器的逻辑，并在包中新创建一个python源文件以处理事件的具体内容，即将“事件响应器”和“事件处理器”分开编写，这样在版本迁移等情况发生后可以较快的对事件响应器进行修复而不需要过多的调节事件处理器。

## 小结
本节的内容较为简单，我们了解了插件的结构，并创建了一个空的插件。
但其中出现了“事件响应器”以及“事件处理器”这两个新的概念，我们将在接下来两节进行讲解。